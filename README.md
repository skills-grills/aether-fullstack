# AI Report Generation Service

As per the [candidate brief presented here](BRIEF.md), this is a FastAPI-based service that generates detailed outline reports using AI. The service allows users to submit a topic and receive a structured report with multiple sections, all processed asynchronously.

The full generating codeset originally reposited at `https://www.github.com/skills-grills/aether-fullstack` was developed by Joshua Bodyfelt. The code may **ONLY** be used for consideration of his candidacy for a Senior Full-Stack/Backend Engineer. There are no commericial permissions given without expressed written contracting. [Further details are covered by CC BY-NC-SA 4.0 licensing](LICENSE.md).

## Features

- Asynchronous report generation
- Real-time progress tracking
- Redis-based job state management
- OpenAI API integration for content generation
- RESTful API with OpenAPI documentation
- Containerized deployment ready

## Prerequisites

- Python 3.10+
- Docker Desktop
- OpenAI API key

## Setup: Environment Variables

This build utilises the standard op proc of an "environment variable file" to hold secrets & configurations - there is `.env.example` that ought be copied over to `.env`, and have any of the following variables manually updated:

|     Variable     |      Description      |         Default Value         |
| :--------------: | :-------------------: | :---------------------------: |
|   `API_KEY`   |    OpenAI API key    |    *YOU NEED TO ADD IT!*    |
| `API_BASE_URL` |  OpenAI API base URL  | `https://api.openai.com/v1` |
|  `MODEL_NAME`  |  OpenAI model to use  |           `gpt-4`           |
|  `REDIS_HOST`  |      Redis host      |           `redis`           |
|  `REDIS_PORT`  |      Redis port      |           `6379`           |
|   `REDIS_DB`   | Redis database number |             `0`             |
|     `HOST`     |   Application host   |          `0.0.0.0`          |
|     `PORT`     |   Application port   |           `8000`           |
|   `DEBUG`    |   Enable debug mode   |           `True`           |

## Deployment: Containers

If you're a developer...you damn well better have Docker installed. You can get [Docker Desktop here](https://docs.docker.com/compose/install/) (and the included Compose). We can also do a local deployment using `uv` or `pip`...but for everyone's peace of mind, let's keep it containered! Once it's installed, the build process is very simple:

1. Clone the repository (assuming you have GitHub tokening setup already):
   ```bash
   git clone git@github.com:skills-grills/aether-fullstack.git
   cd aether-fullstack
   ```
2. There two services - a Redis service, and this app - IaC'ed in `docker-compose.yaml`. Make sure your local Docker Desktop is running, then issue:
   ```bash
   docker compose up
   ```

That initiates our two services - your terminal output should first read something like:

```bash
[+] Running 3/3
 ✔ Network aether-fullstack_app-network  Created                                                                   0.0s
 ✔ Container aether-fullstack-redis-1    Created                                                                   0.0s
 ✔ Container aether-fullstack-app-1      Created                                                                   0.0s
Attaching to app-1, redis-1
redis-1  | Starting Redis Server
redis-1  | 1:C 06 Oct 2025 21:59:27.442 * oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
redis-1  | 1:C 06 Oct 2025 21:59:27.442 * Redis version=8.2.2, bits=64, commit=00000000, modified=1, pid=1, just started
redis-1  | 1:C 06 Oct 2025 21:59:27.442 * Configuration loaded
⋮
redis-1  | 1:M 06 Oct 2025 21:59:27.480 * <search> Acquired RedisJSON_V5 API
redis-1  | 1:M 06 Oct 2025 21:59:27.481 * Server initialized
redis-1  | 1:M 06 Oct 2025 21:59:27.481 * <search> Loading event starts
redis-1  | 1:M 06 Oct 2025 21:59:27.481 * <search> Enabled workers threadpool of size 4
redis-1  | 1:M 06 Oct 2025 21:59:27.482 * Loading RDB produced by version 8.2.2
redis-1  | 1:M 06 Oct 2025 21:59:27.482 * RDB age 54625 seconds
redis-1  | 1:M 06 Oct 2025 21:59:27.482 * RDB memory usage when created 1.07 Mb
redis-1  | 1:M 06 Oct 2025 21:59:27.482 * Done loading RDB, keys loaded: 8, keys expired: 0.
redis-1  | 1:M 06 Oct 2025 21:59:27.482 * <search> Disabled workers threadpool of size 4
redis-1  | 1:M 06 Oct 2025 21:59:27.482 * <search> Loading event ends
redis-1  | 1:M 06 Oct 2025 21:59:27.482 * DB loaded from disk: 0.001 seconds
redis-1  | 1:M 06 Oct 2025 21:59:27.482 * Ready to accept connections tcp
```

That denotes that the Redis server is up and listening. You should also see the following last block in the messaging:

```bash
app-1    | INFO:     Started server process [1]
app-1    | INFO:     Waiting for application startup.
app-1    | 2025-10-06 21:59:29,065 - app.main - INFO - Starting up AI Report Generation Service...
app-1    | INFO:     Application startup complete.
app-1    | INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
```

Note that you could also start each of these services individually, e.g.

```
docker compose up redis		# Boots up just Redis
docker compose up app		# Boots up the AI Report app
```

## Usage: API Endpoints

Once you have the two these services deployed, the AI report generator is active. Firstly, the API is accessed at: `http://localhost:8000`. It's interactive Swagger doc is accessed at `http://localhost:8000/docs` - from this (and the brief), there are three main routes present. Here's how to use them with a typical `curl` request, and an example response.

1. **Health Check** - just as a check to ensure that the API is up and running.
   ```bash
   user@localhost> curl -X GET http://localhost:8000/health
   {"status":"ok"}
   ```
2. **Create Report** - this route initiates the build process, running the seperate AI async calls.
   ```bash
   user@localhost> curl -X POST http://localhost:8000/api/v1/reports -H "Content-Type: application/json" -d '{"topic": "The Roman Empire"}'
   {"job_id":"8ef0a890-e8ea-4ec8-828f-c13d6d4600f3","status":"pending","progress":0.0,"report":null,"error":null}
   ```
3. **Get Report** - gets status update OR completed result.
4. ```bash
   # Status Update
   user@localhost> curl -X GET http://localhost:8000/api/v1/reports/8ef0a890-e8ea-4ec8-828f-c13d6d4600f3
   {"job_id":"8ef0a890-e8ea-4ec8-828f-c13d6d4600f3","status":"processing","progress":0.5249999999999999,"report":null,"error":null}

   # Completed Result
   user@localhost> curl -X GET http://localhost:8000/api/v1/reports/8ef0a890-e8ea-4ec8-828f-c13d6d4600f3 | jq
   {
     "job_id": "8ef0a890-e8ea-4ec8-828f-c13d6d4600f3",
     "status": "completed",
     "progress": 1.0,
     "report": {
       "topic": "The Roman Empire",
       "outline": [
         "Introduction to the Roman Empire",
         "Rise of the Roman Empire",
         "Political Structure and Governance",
         "Society and Culture",
         "Economy and Trade",
         "Military and Warfare",
         "Fall of the Roman Empire",
         "Legacy of the Roman Empire"
       ],
       "sections": {
         "Introduction to the Roman Empire": "Section I: Introduction to the Roman Empire\n\nThe Roman Empire, a historical period that left significant imprints on the canvas of time, emerged from the Roman Republic's ashes following the crisis of the First Triumvirate. The Empire's commencement is traditionally dated to 27 BC when Gaius Octavius, later known as Augustus, became the first Roman Emperor after defeating Marc Antony in the Battle of Actium. This historical milestone marked the beginning of more than four hundred years of imperial rule, which has been divided into two main periods: The Roman Principate (27 BC - 284 AD) and The Dominate (284 AD - 476 AD, the Empire's fall in the West). \n\nThe Roman Empire's geographical expansion was unparalleled, extending from the British Isles to the Near East, enveloping the entire Mediterranean basin. Its cosmopolitan nature incorporated a variety of cultures, languages, and religions, making it a remarkable example of successful, albeit often forced, cultural integration. The Empire's political structure was complex, with the emperor possessing autocratic power, and a largely ceremonial senate providing an illusion of the republic's continuity. \n\nThe era was characterized by substantial advancements in various sectors, including engineering, law, arts, and the military. Roman law laid the foundation for the legal systems of most Western countries. The Empire's architectural and engineering marvels, such as aqueducts, roads, and amphitheaters, continue to draw admiration for their ingenuity and grandeur. The Roman military, structured into legions, was a formidable force and a key instrument in the Empire's expansion and consolidation. \n\nHowever, the Roman Empire was also marked by frequent power struggles, economic crises, and social upheaval. Several factors contributed to its decline, including military overreach, economic instability, and the increasing pressures from barbarian invasions. The fall of the Western Roman Empire in 476 AD, when Emperor Romulus Augustus was deposed by the Germanic King Odoacer, signified the end of one of the world's most powerful empires.\n\nIn sum, the Roman Empire is a crucial chapter in human history. Its influence continues to echo through modern Western societies in various facets, including governance, infrastructure, language, and laws. This report aims to delve deeper into the Empire's intricate workings, exploring its rise, consolidation, cultural dynamics, and eventual fall. Through this investigation, we can gain insights into not only the past but also the present, as the Empire's legacy continues to shape our world.",
         "Rise of the Roman Empire": "Section II: The Rise of the Roman Empire\n\nThe rise of the Roman Empire, a pivotal period in world history, is a narrative filled with a series of political and military events that led to the formation of one of the most potent empires of all time. The ascension of the Roman Empire commenced in 753 BC with the founding of Rome and culminated in 27 BC with the establishment of the Roman Empire by Augustus Caesar. \n\nThe establishment of Rome in 753 BC by its legendary founder, Romulus, marked the inception of Rome as a city-state governed by kings. This monarchic period, lasting until 509 BC, was characterized by the reign of seven kings, notably Numa Pompilius for his institution of religious practices, and Servius Tullius for the implementation of the Servian constitution. The expulsion of the last king, Lucius Tarquinius Superbus, marked the birth of the Roman Republic, a period characterized by shared governmental power and territorial expansion.\n\nThe Roman Republic, lasting from 509 BC until 27 BC, was a period of significant growth and expansion for Rome. The republic was ruled by a system of two annually elected magistrates, known as consuls, and a senate that held legislative power. This period witnessed Rome's transformation from a city-state to a dominant power in the Mediterranean. Key events during the republic include the Punic Wars (264-146 BC) against Carthage, which solidified Rome's control over the Mediterranean Sea and expanded its influence into North Africa.\n\nThe decline of the Roman Republic and the emergence of the Roman Empire were precipitated by a series of civil wars. The most notable of these was the conflict between Julius Caesar and Pompey the Great, which ended in Caesar's victory and his appointment as the dictator perpetuo in 44 BC. Yet, the true beginning of the empire was marked by the reign of Caesar Augustus, who, after defeating Mark Antony and Cleopatra in the Battle of Actium in 31 BC, consolidated his power and was officially recognized as the first Roman Emperor in 27 BC. \n\nIn conclusion, the rise of the Roman Empire was a complex process marked by a transition from monarchy to republic, followed by a shift to imperial rule. These changes were accompanied by vast territorial expansion, military conquests, and political reforms. The rise of the Roman Empire laid the groundwork for a period of dominance and influence that would significantly shape the cultural, political, and social landscapes of Europe and the broader Mediterranean region.",
         "Political Structure and Governance": "Section III: Political Structure and Governance of the Roman Empire\n\nThe Roman Empire, as one of the most influential civilizations in recorded history, was noted for its complex political structure and unique system of governance. This section aims to delve into the intricacies of the political framework that contributed to the longevity and prosperity of this vast empire, spanning over four centuries.\n\nThe political structure of the Roman Empire was a mixed constitution, combining elements of democracy, oligarchy, and autocracy. The governance system evolved significantly over time, moving from a monarchy during the period of the Roman Kingdom, to a republic during the Roman Republic, and eventually to an autocratic empire under the Roman Empire. This evolution was marked by several key stages, each characterized by significant changes in the distribution of power.\n\nDuring the Roman Republic (509 – 27 BC), the political structure was characterized by a system of representative government, with legislative assemblies, executive officials known as magistrates, and a Senate. The Senate, composed of aristocrats or patricians, was the most powerful body, exerting significant influence over foreign and domestic policy. The magistrates, elected annually, executed laws and led the Roman military. The legislative assemblies were a form of direct democracy where the Roman citizens voted on laws and elected the magistrates.\n\nHowever, the shift to the Roman Empire (27 BC – 476 AD) marked the advent of a more centralized and autocratic form of government. The emperor, initially Augustus, held supreme authority, making key decisions and controlling the military. The Senate's role was diminished, and it became largely advisory, although it retained prestige. The emperor held the power to appoint senators, and often, these appointments were used as a means of consolidating power. \n\nThe imperial system was not without its checks and balances. The Praetorian Guard, initially established to protect the emperor, evolved into a powerful political force that could make or unmake emperors. The Roman populace also held a certain degree of power. Emperors often sought their approval through public works, games, and distributions of food.\n\nIn conclusion, the political structure and governance of the Roman Empire was multifaceted and dynamic. It was a system that evolved over centuries, adapting to the changing needs of the empire and its diverse population. Despite its eventual fall, the political legacy of the Roman Empire continues to influence modern political systems and governance structures worldwide.",
         "Society and Culture": "Section III: Society and Culture in the Roman Empire\n\nThe Roman Empire, which lasted from 27 BC to AD 476, was a complex society marked by tremendous cultural and societal diversity. This diversity was a product of the Empire's vast geographical expanse, stretching from the British Isles to North Africa and the Near East. Despite this diversity, certain common elements, including language, religion, and social structures, provided a sense of cultural unity and identity.\n\nThe Latin language was one of the central pillars of Roman society and culture. It was the official language of the state and was used in law, administration, and formal literature. Given the Empire's vast geographical expanse, Latin served as a unifying factor, facilitating communication and cultural exchange among different regions. Nevertheless, the use of Greek was also widespread, especially in the eastern provinces of the Empire. Many of the Empire's educated elites were bilingual, and Greek culture, particularly its philosophy and sciences, had a profound influence on Roman thought.\n\nReligion in the Roman Empire was characterized by a system of public, official worship of a pantheon of gods, including Jupiter, Mars, and Venus. The Romans saw these public rites as essential for securing the favor of the gods and maintaining the well-being of the state. However, the Empire was also marked by religious diversity and tolerance. Numerous foreign cults and religions, including Judaism and Christianity, were practiced within its borders. Over time, Christianity, which began as a marginalized Jewish sect, gained increasing acceptance and eventually became the state religion under Emperor Constantine in the 4th century AD.\n\nRoman society was highly stratified, with a clear distinction between the elites and the common people. The elites consisted of the senatorial and equestrian orders, which controlled the political, economic, and cultural life of the Empire. The common people, or plebeians, comprised the bulk of the population and were largely engaged in agriculture and other forms of manual labor. Slavery was also a significant part of Roman society, with slaves used in a variety of roles, including household servants, laborers, and even educators.\n\nDespite these societal divisions, the Roman Empire was marked by a degree of social mobility. The imperial period saw the rise of new elites, often from provincial backgrounds, who gained wealth and status through military service, bureaucratic office, or involvement in the Empire's extensive trade networks. Moreover, a system of patronage, in which powerful patrons provided protection and assistance to lower-status clients in return for loyalty and service, further facilitated social mobility.\n\nIn conclusion, the society and culture of the Roman Empire was a complex tapestry, woven together by common threads such as language and religion, but also marked by significant diversity and dynamism. Despite rigid social hierarchies, the Empire offered opportunities for social mobility and was characterized by a degree of religious and cultural tolerance. This complex societal and cultural milieu, shaped by both internal dynamics and external influences, played a crucial role in the Empire's longevity and legacy.",
         "Economy and Trade": "Section III: Economy and Trade in the Roman Empire\n\nThe economic system of the Roman Empire, a complex and multifaceted entity, was one of the key factors that propelled it to the zenith of its power and influence. This economic system, encompassing the period from the Republic's expansion in the 2nd century BC through to the fall of the Western Roman Empire in the 5th century AD, was characterized by a mingling of localized and centralized trade patterns, currency systems, tax policies, and an intricate network of production and distribution.\n\nThe Roman economy was primarily based on agriculture, but trade played a significant role in the Empire's prosperity. The Romans had an extensive network of roads and sea routes that facilitated domestic and international trade. They imported and exported a wide array of goods, including grain, wine, olive oil, metals, livestock, and luxury items such as silk and spices. For example, the famous Roman road, the Via Appia, connected Rome to the southern parts of Italy, acting as a conduit for the movement of goods and resources. Similarly, the Mediterranean Sea, often referred to as 'a Roman lake', was a vital trade route for the Empire, connecting it to Africa, Asia, and Europe.\n\nOne of the most fascinating aspects of the Roman economy was its extensive use of coinage. In this period, the denarius, a small silver coin, was the most common currency in circulation. The use of a standardized currency across the vast Empire facilitated trade and economic integration, and it also served as a means of disseminating imperial propaganda, with emperors often featuring their images and achievements on the coins.\n\nHowever, the Roman economy was not without its challenges. Taxation was a significant issue. While taxes funded public services like road construction and the military, they were often heavy and unevenly applied, leading to economic disparity and unrest. The economic stability of the Empire was also largely dependent on the constant expansion and the acquisition of new territories, a model that was ultimately unsustainable.\n\nIn conclusion, the economic system and trade patterns of the Roman Empire were complex and multifaceted, characterized by a remarkable level of organization and sophistication. The Empire's economic policies, infrastructure, and systems of trade and currency played a significant role in its rise to power and its enduring legacy. However, the inherent challenges and contradictions within this system also contributed to its eventual decline. This intricate balance between the Empire's economic successes and failures provides a fascinating insight into one of history's most significant civilizations.",
         "Military and Warfare": "Section IV: Military and Warfare in The Roman Empire\n\nThe Roman Empire, one of history’s most extraordinary regimes, owed its longevity and expansion to its military might. The Roman military was a sophisticated and highly effective force, a testament to Roman ingenuity, discipline, and ambition. The military's structure, strategies, and technologies were pivotal in the empire's growth and maintenance, and its legacy continues to influence modern warfare.\n\nThe Roman army's organization was based on a hierarchical structure. The smallest unit was the contubernium, a group of eight men. Ten contubernia formed a century, commanded by a centurion. Six centuries constituted a cohort, and ten cohorts (around 5,000 men) made up a Roman legion, the largest unit. Additionally, the Roman military included auxiliaries, non-citizen soldiers who provided crucial support in areas such as cavalry and archery. The Roman navy, a lesser-known branch, played a significant role in securing the Empire's extensive coastlines and supporting ground operations. This structured hierarchy ensured effective command and control across the army, which was crucial for the execution of complex strategies and campaigns.\n\nTactically, the Roman military was known for its discipline and innovative strategies. The Romans excelled in siege warfare and fortified camp construction, which offered protection during campaigns. The manipular and cohort tactics, the testudo (tortoise) formation, and the use of various types of Roman legions according to battlefield conditions demonstrated their flexibility and adaptability in warfare. Additionally, Roman engineers developed advanced military technologies, such as the ballista and onager (types of artillery), and infrastructure like roads and fortifications that facilitated troop movement and defense.\n\nThe Roman military's impact was not only in conquering and defending territories but also in shaping the Empire's society and economy. Soldiers, after serving for 25 years, were granted citizenship, which encouraged loyalty and integration of diverse peoples. Military service was a path to social mobility for many Romans. Economically, the military's need for supplies and equipment stimulated local industries and trade across the Empire.\n\nIn conclusion, the Roman military was a powerful force that drove the Empire's expansion and sustained its rule for centuries. Its strategies, technologies, and structure were advanced for their time and are still studied today. However, it is also important to consider the military's broader societal and economic impacts, which contributed to the Roman Empire's complexity and durability. The Roman military serves as a profound example of how military might, when combined with strategic ingenuity and structural efficiency, can shape the course of history.",
         "Fall of the Roman Empire": "Section VI: The Fall of the Roman Empire \n\nThe fall of the Roman Empire is a topic of significant historical import, marking the end of a civilization that had dominated the Mediterranean for nearly five centuries. This period, traditionally dated to 476 AD when the last Roman emperor, Romulus Augustus, was deposed by the Germanic king Odoacer, was characterized by a series of internal and external factors that gradually weakened the Empire, leading to its eventual collapse.\n\nSeveral internal factors contributed significantly to the decline of the Roman Empire. The first of these was the political instability and frequent changes in leadership. Between 235 and 284 AD, during a period known as the Crisis of the Third Century, Rome had over 20 emperors. This instability was often fomented by military insurrection, as generals frequently seized power from the emperors. This period also saw the Empire divided into three competing states: the Gallic Empire, the Palmyrene Empire, and the Italian-centered Roman Empire. Although the Empire was later reunified, these events significantly destabilized the central authority.\n\nEconomic troubles were another crucial determinant of the Empire's decline. Several emperors debased the Roman currency, leading to rampant inflation. Additionally, the Empire's vast size necessitated a large military force, which became increasingly expensive to maintain. These financial pressures were compounded by a decline in trade, due to the Empire's instability, and an increase in taxation, leading to widespread poverty and a decrease in the population.\n\nExternal pressures also played a significant role in the fall of the Roman Empire. From around 300 AD, Rome faced constant threats from several Germanic tribes along its borders. The Huns, Goths, Vandals, and Visigoths all launched successful invasions against the Empire. The most devastating of these was the Visigothic sack of Rome in 410 AD, a psychological blow from which the Empire never fully recovered.\n\nThe fall of the Roman Empire was not an abrupt event; rather, it was a gradual process that occurred over several centuries. This decline was a result of a complex interplay of internal and external pressures, which progressively eroded the empire's political, economic, and military structures. As such, it serves as a stark reminder of the potential fragility of even the most powerful civilizations.\n\nThe fall of the Roman Empire had far-reaching consequences, both in the short and long term. In the immediate aftermath, the western world entered a period known as the Dark Ages, characterized by cultural and economic regression. However, in the long term, the fall of Rome also paved the way for the rise of new states and cultures, including the Byzantine Empire and the various kingdoms of medieval Europe, thereby shaping the course of Western history.",
         "Legacy of the Roman Empire": "**Legacy of the Roman Empire**\n\nThe Roman Empire, one of history's most powerful and influential civilizations, has left a significant legacy that has shaped various aspects of the modern world. This section focuses on the enduring effects of this great empire, discussing its influence in areas such as language, politics, infrastructure, law, and culture.\n\n**Language and Literature**\n\nOne of the most notable legacies of the Roman Empire is in the realm of language. Latin, the language of the Romans, evolved into the Romance languages: Italian, French, Spanish, Portuguese, and Romanian. These languages collectively have hundreds of millions of native speakers today. Furthermore, Latin and Greek, the language of the learned in the Roman Empire, have been substantially used in science, medicine, theology, and law, with many terms still in use. The Romans, drawing on Greek models, also created a rich body of literature, including works by Virgil, Horace, and Ovid, which continue to be studied for their enduring artistic value.\n\n**Government and Law**\n\nThe Roman Empire's political system and legal structures have had an extensive and profound influence. The concept of a republic, where the country is considered a \"public matter\", was a Roman innovation. Many modern states, including the United States, have borrowed heavily from the Roman model in their system of governance. The Romans also laid down legal principles, such as the presumption of innocence in criminal proceedings and the right to a fair trial, which remain foundational in modern legal systems.\n\n**Infrastructure and Engineering**\n\nThe Romans were master builders, and their feats in engineering have stood the test of time. Roads, aqueducts, bridges, and monumental buildings such as the Colosseum and the Pantheon demonstrate the Romans' architectural and engineering prowess. Roman roads, in particular, played a crucial role in the administration of the empire by facilitating rapid military movements and trade. Today, numerous modern European roads still follow the paths laid down by the Romans.\n\n**Culture and Society**\n\nFinally, the Roman Empire has had a lasting impact on Western culture and society. Roman art, architecture, and philosophy have influenced styles and thought for centuries. The Romans also spread Christianity, which they initially persecuted, across their vast empire. As a result, Christianity became a dominant religious, cultural, and political force in the Western world.\n\nIn conclusion, the legacy of the Roman Empire is vast, pervasive, and enduring. Its influences are seen in modern languages, political systems, legal principles, engineering, and cultural practices. The empire may have fallen, but its impact continues to resonate in numerous aspects of contemporary life."
       }
     },
     "error": null
   }
   ```
